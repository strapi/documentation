@use './tokens.scss' as *;
@use './mixins' as *;

:root {
  --border-left-color: var(--strapi-neutral-200);
  --quote-icon-color: var(--strapi-neutral-200);
  --editorial-first-letter-color: var(--strapi-neutral-500);
  --default-tldr-font-size: var(--strapi-font-size-md);
}

.tldr {
  border-left: 4px solid var(--border-left-color); 
  padding-left: var(--strapi-spacing-4);
  margin-bottom: var(--strapi-spacing-8);
  font-size: var(--default-tldr-font-size);
  color: var(--strapi-neutral-500);
  
  &__title {
    font-weight: 600;
    margin-bottom: var(--strapi-spacing-2);
    color: var(--strapi-neutral-500);
  }
  
  &__content {
    color: inherit;
    
    * {
      color: inherit;
    }
    
    code {
      background-color: var(--strapi-neutral-100);
      border: 1px solid var(--strapi-neutral-200);
    }
    
    a {
      color: var(--strapi-primary-500);
      
      &:hover {
        color: var(--strapi-primary-600);
      }
    }
    
    > *:last-child {
      margin-bottom: 0;
    }
  }

  // Design: quote-style avec icône newspaper en filigrane  
  &--quote {
    position: relative;
    
    &::before {
      content: '\E346'; // ph-newspaper icon (U+E344)
      font-family: 'Phosphor';
      font-size: 4em;
      // font-style: italic;
      position: absolute;
      top: 9px;
      left: -72px;
      color: var(--quote-icon-color);
      z-index: -1;
    }
    
    .tldr__title {
      position: relative;
      z-index: 1;
    }
    
    .tldr__content {
      position: relative;
      z-index: 1;
    }
  }

  // Design: editorial avec drop cap classique
  &--editorial {
    .tldr__content p:first-child::first-letter {
      font-size: 3.3em;
      font-weight: 700;
      float: left;
      line-height: 0.8;
      margin-right: 8px;
      margin-top: 2px;
      color: var(--editorial-first-letter-color);
    }
  }

  // Design: highlighted avec background dégradé + bordure complète
  &--highlighted {
    background: linear-gradient(90deg, var(--strapi-neutral-100) 0%, transparent 100%);
    border-radius: 0 4px 4px 0;
    padding: var(--strapi-spacing-3) var(--strapi-spacing-4);
    
    .tldr__content code {
      background-color: var(--strapi-neutral-200);
      border-color: var(--strapi-neutral-300);
    }
  }
}

@include dark {
  --border-left-color: var(--strapi-neutral-400);
  --quote-icon-color: var(--strapi-neutral-400);
  --editorial-first-letter-color: var(--strapi-neutral-400);

  .tldr {
    border-left-color: var(--strapi-neutral-400);
    color: var(--strapi-neutral-500);
    
    &__title {
      color: var(--strapi-neutral-500);
    }
    
    &__content {
      code {
        background-color: var(--strapi-neutral-150);
        border-color: var(--strapi-neutral-200);
      }
      
      a {
        color: var(--strapi-primary-500);
        
        &:hover {
          color: var(--strapi-primary-400);
        }
      }
    }

    // Design quote dark mode
    &--quote {
      &::before {
        color: var(--quote-icon-color);
      }
    }

    // Design editorial dark mode
    &--editorial {
      .tldr__content p:first-child::first-letter {
        color: var(--editorial-first-letter-color);
      }
    }

    // Design highlighted dark mode
    &--highlighted {
      background: linear-gradient(90deg, var(--strapi-neutral-150) 0%, transparent 100%);
      
      .tldr__content code {
        background-color: var(--strapi-neutral-200);
        border-color: var(--strapi-neutral-300);
      }
    }
  }
}